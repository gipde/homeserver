// vim: set filetype=cpp:

#include "Ds18x20libTest.h"

extern "C" {
#include "../../main/ds18x20lib.h"
#include "../../main/delay.h"
}

CASE(Ds18x20LibTest, TestBase)

SETUP()
{
    initMock();
}

TEST(test1)
{
    /*
     * specify OneWire Pattern for Reset
     */

    debug("Reset Test");
    reset();
    char r[] = {0xca, 0x37, 0x87, 0x28, 0xab, 0x2a, 0xd6, 0xd6, 0x9b, 0x8, 0x80, 0xc7, 0x3, 0x4d, 0xa6, 0x43, 0xa5, 0x25, 0x48, 0x4f};
    return cmpMock(r);
}

TEST(test2)
{
    reset();
    delay_ms(10);
    char r[] = {0x6e, 0xce, 0x39, 0x54, 0x61, 0x72, 0x12, 0xb0, 0xec, 0xb1, 0xe0, 0xce, 0x32, 0xf2, 0xbb, 0x50, 0xb5, 0x69, 0x55, 0xf6};
    return cmpMock(r);
}

